<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.chart.PieChart?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.cell.PropertyValueFactory?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<TabPane tabClosingPolicy="UNAVAILABLE" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.ucop.quang_report.controller.ReportController">
  <tabs>
    <Tab text="Quản lý Khuyến mãi (Promotion)">
      <content>
        <VBox spacing="10.0">
           <padding><Insets bottom="20" left="20" right="20" top="20" /></padding>
           <children>
              <Label text="DANH SÁCH MÃ GIẢM GIÁ" textFill="#8e44ad"><font><Font name="System Bold" size="18.0" /></font></Label>
              
              <TableView fx:id="tablePromo" prefHeight="250.0">
                <columns>
                  <TableColumn text="Mã Code" prefWidth="100"><cellValueFactory><PropertyValueFactory property="code"/></cellValueFactory></TableColumn>
                  <TableColumn text="Giá trị giảm" prefWidth="100"><cellValueFactory><PropertyValueFactory property="discountValue"/></cellValueFactory></TableColumn>
                  <TableColumn text="Loại" prefWidth="80"><cellValueFactory><PropertyValueFactory property="discountType"/></cellValueFactory></TableColumn>
                </columns>
              </TableView>

              <HBox spacing="10.0" alignment="CENTER_LEFT">
                 <TextField fx:id="txtCode" promptText="Nhập mã (VD: SALE10)" />
                 <TextField fx:id="txtValue" promptText="Giá trị (VD: 50000)" />
                 <Button text="Tạo Mã Mới" onAction="#handleAddPromo" style="-fx-background-color: #8e44ad; -fx-text-fill: white;"/>
              </HBox>
           </children>
        </VBox>
      </content>
    </Tab>

    <Tab text="Biểu đồ &amp; Thống kê (Charts)">
      <content>
        <VBox spacing="20.0" alignment="TOP_CENTER">
           <padding><Insets bottom="20" left="20" right="20" top="20" /></padding>
           <children>
              <Label text="THỐNG KÊ DOANH THU &amp; SẢN PHẨM" textFill="#c0392b"><font><Font name="System Bold" size="20.0" /></font></Label>
              
              <HBox spacing="20.0" prefHeight="400.0">
                 <PieChart fx:id="pieChartProducts" title="Top Sản Phẩm Bán Chạy" />
                 
                 <BarChart fx:id="barChartRevenue" title="Tổng Doanh Thu">
                   <xAxis><CategoryAxis label="Danh mục" /></xAxis>
                   <yAxis><NumberAxis label="VNĐ" /></yAxis>
                 </BarChart>
              </HBox>
              
              <Button text="Làm mới dữ liệu" onAction="#loadChartData" />
           </children>
        </VBox>
      </content>
    </Tab>
  </tabs>
</TabPane>