<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.cell.PropertyValueFactory?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<HBox spacing="20.0" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.ucop.long_payment.controller.PaymentController">
   <padding><Insets bottom="10" left="10" right="10" top="10" /></padding>
   
   <VBox spacing="10.0" HBox.hgrow="ALWAYS">
       <Label text="VÍ ĐIỆN TỬ" textFill="#27ae60"><font><Font name="System Bold" size="20.0" /></font></Label>
       
       <HBox spacing="15.0" style="-fx-background-color: #ecf0f1; -fx-padding: 10; -fx-background-radius: 10;">
          <VBox>
              <Label text="Số dư khả dụng:" />
              <Label fx:id="lblBalance" text="0 VNĐ" textFill="#2980b9"><font><Font name="System Bold" size="24.0" /></font></Label>
          </VBox>
       </HBox>

       <HBox spacing="10.0" alignment="CENTER_LEFT">
           <TextField fx:id="txtDeposit" promptText="Nhập tiền nạp..." />
           <Button text="Nạp Tiền" onAction="#handleDeposit" style="-fx-background-color: #27ae60; -fx-text-fill: white;" />
       </HBox>
       
       <Separator />
       
       <Label text="Lịch sử giao dịch:" style="-fx-font-weight: bold;"/>
       <TableView fx:id="tableHistory" VBox.vgrow="ALWAYS">
           <columns>
               <TableColumn text="Mã GD" prefWidth="50"><cellValueFactory><PropertyValueFactory property="id" /></cellValueFactory></TableColumn>
               <TableColumn text="Thời gian" prefWidth="120"><cellValueFactory><PropertyValueFactory property="paymentDate" /></cellValueFactory></TableColumn>
               <TableColumn text="Số tiền" prefWidth="100"><cellValueFactory><PropertyValueFactory property="amount" /></cellValueFactory></TableColumn>
               <TableColumn text="Loại" prefWidth="80"><cellValueFactory><PropertyValueFactory property="paymentMethod" /></cellValueFactory></TableColumn>
           </columns>
       </TableView>
   </VBox>
   
   <VBox spacing="8.0" prefWidth="350.0" style="-fx-border-color: #bdc3c7; -fx-border-width: 0 0 0 1; -fx-padding: 0 0 0 10;">
       <Label text="THANH TOÁN ĐƠN HÀNG" textFill="#e67e22"><font><Font name="System Bold" size="18.0" /></font></Label>
       
       <TextField fx:id="txtOrderId" promptText="Nhập Mã Đơn Hàng (Order ID)" />
       <TextField fx:id="txtVoucher" promptText="Mã giảm giá (Nếu có)" />
       
       <Button text="Kiểm tra &amp; Tạo QR" onAction="#handleCheckOrder" maxWidth="Infinity" style="-fx-background-color: #3498db; -fx-text-fill: white;" />
       
       <VBox spacing="2.0" style="-fx-background-color: #f7f9f9; -fx-padding: 5; -fx-background-radius: 5;">
           <Label text="CHI TIẾT THANH TOÁN:" style="-fx-font-weight: bold;"/>
           <Label fx:id="lblDetail" text="..." wrapText="true" />
           <Label text="Tổng thanh toán:" />
           <Label fx:id="lblFinalTotal" text="0 VNĐ" textFill="#c0392b"><font><Font name="System Bold" size="20.0" /></font></Label>
       </VBox>
       
       <VBox alignment="CENTER" spacing="2.0">
           <Label text="Quét mã xác nhận:" textFill="#7f8c8d" />
           <ImageView fx:id="imgQR" fitWidth="120.0" fitHeight="120.0" preserveRatio="true" />
       </VBox>
       
       <Button text="XÁC NHẬN THANH TOÁN" onAction="#handlePay" maxWidth="Infinity" prefHeight="35.0" style="-fx-background-color: #e74c3c; -fx-text-fill: white; -fx-font-weight: bold;" />
       <Button text="HOÀN TIỀN (REFUND)" onAction="#handleRefund" maxWidth="Infinity" style="-fx-background-color: #95a5a6; -fx-text-fill: white;" />   
   </VBox>
</HBox>