<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.cell.PropertyValueFactory?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<VBox spacing="10.0" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.ucop.hieu_order.controller.CartController">
   <padding><Insets bottom="20" left="20" right="20" top="20" /></padding>
   <children>
      <Label text="TẠO ĐƠN HÀNG MỚI" textFill="#e67e22"><font><Font name="System Bold" size="20.0" /></font></Label>
      
      <HBox spacing="10.0" alignment="CENTER_LEFT">
         <Label text="Sản phẩm:" />
         <ComboBox fx:id="cbProducts" prefWidth="250.0" />
         <Label text="SL:" />
         <TextField fx:id="txtQuantity" prefWidth="50.0" text="1" />
         <Button onAction="#handleAddToCart" text="Thêm" style="-fx-background-color: #3498db; -fx-text-fill: white;" />
      </HBox>

      <TableView fx:id="tableCart" prefHeight="200.0">
        <columns>
          <TableColumn text="Sản phẩm" prefWidth="250"><cellValueFactory><PropertyValueFactory property="item" /></cellValueFactory></TableColumn>
          <TableColumn text="Đơn giá" prefWidth="100"><cellValueFactory><PropertyValueFactory property="price" /></cellValueFactory></TableColumn>
          <TableColumn text="SL" prefWidth="50"><cellValueFactory><PropertyValueFactory property="quantity" /></cellValueFactory></TableColumn>
        </columns>
      </TableView>

      <HBox spacing="20.0" alignment="TOP_RIGHT">
          <VBox spacing="5.0">
             <Label text="Mã giảm giá (Voucher):" />
             <HBox spacing="5.0">
                <TextField fx:id="txtPromoCode" promptText="Nhập mã..." />
                <Button onAction="#handleApplyCode" text="Áp dụng" />
             </HBox>
          </VBox>

          <GridPane hgap="10.0" vgap="5.0">
             <columnConstraints>
                <ColumnConstraints halignment="RIGHT" />
                <ColumnConstraints halignment="RIGHT" minWidth="100.0" />
             </columnConstraints>
             <children>
                <Label text="Tạm tính:" GridPane.rowIndex="0" />
                <Label fx:id="lblSubTotal" text="0" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                
                <Label text="Thuế (10%):" GridPane.rowIndex="1" />
                <Label fx:id="lblTax" text="0" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                
                <Label text="Phí Ship:" GridPane.rowIndex="2" />
                <Label fx:id="lblShip" text="0" GridPane.columnIndex="1" GridPane.rowIndex="2" />
                
                <Label text="Giảm giá:" GridPane.rowIndex="3" textFill="GREEN" />
                <Label fx:id="lblDiscount" text="0" GridPane.columnIndex="1" GridPane.rowIndex="3" textFill="GREEN" />
                
                <Label text="TỔNG CỘNG:" GridPane.rowIndex="4"><font><Font name="System Bold" size="14.0" /></font></Label>
                <Label fx:id="lblGrandTotal" text="0" textFill="#c0392b" GridPane.columnIndex="1" GridPane.rowIndex="4"><font><Font name="System Bold" size="16.0" /></font></Label>
             </children>
          </GridPane>
      </HBox>

      <Button onAction="#handleCheckout" text="XÁC NHẬN ĐẶT HÀNG (PLACED)" maxWidth="Infinity" style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 10;" />
   </children>
</VBox>